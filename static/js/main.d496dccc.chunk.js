(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,n){e.exports=n(25)},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){},24:function(e,t,n){},25:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(12),l=n.n(o),s=n(2),c=n(1),i=n(3),u=n(4),m=n(6),h=n(5),p=n(7),f=n(9),d=n(8),b=n.n(d),w=n(10),E=function(){var e=Object(w.a)(b.a.mark(function e(t){var n,a;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.next=5,n.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(e,t){return e.filter(function(e){return e.mother===t.name||e.father===t.name})},P=function(){var e=Object(w.a)(b.a.mark(function e(){var t,n;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"./api/people.json",e.next=3,E("./api/people.json");case 3:return t=e.sent,n=t.map(function(e,n){return Object(f.a)({},e,{id:n,age:e.died-e.born,century:Math.ceil(e.died/100),children:g(t,e).map(function(e){return e.name})})}),e.abrupt("return",n);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),v=(n(21),function(e){var t=e.person,n=e.onClickRow,a=e.selectPerson,o=t.id,l=t.name,s=t.sex,c=t.born,i=t.died,u=t.age,m=t.father,h=t.mother,p=t.children,f=t.century,d={},b=["person","person--lived-in-".concat(f)];return"f"===s&&(b.push("person--female"),0!==p.length&&b.push(" person--mother")),"m"===s&&(b.push("person--male"),0!==p.length&&b.push(" person--father")),u>65&&b.push("person--lived-more-65y"),o===a&&b.push("person--select"),c<1650&&(d.textDecoration="line-through"),i>1800&&(d.fontWeight="bold"),r.a.createElement("tr",{className:b.join(" "),onClick:function(){return n(o)}},r.a.createElement("td",null,o+1),r.a.createElement("td",{style:d},l),r.a.createElement("td",null,s),r.a.createElement("td",null,c),r.a.createElement("td",null,i),r.a.createElement("td",null,u),r.a.createElement("td",null,h),r.a.createElement("td",null,m),r.a.createElement("td",null,f),r.a.createElement("td",null,p.join(", ")))});v.defaultProps={selectPerson:""};var O=v,C=(n(22),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={selectPerson:"",fieldOfSort:"id"},n.getFieldOfSort=function(e){n.setState({fieldOfSort:e.target.textContent.toLowerCase()}),n.props.onSort()},n.handleClickRow=function(e){n.setState({selectPerson:e})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.selectPerson,a=t.fieldOfSort,o=this.props,l=o.people,s=o.sortStatus,i=Object(c.a)(l).sort(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(0===e.length)return function(e,t){return 0};switch(typeof e[0][t]){case"number":case"boolean":return function(e,a){return n*(e[t]-a[t])};case"string":return function(e,a){return n*e[t].localeCompare(a[t])};default:return function(e,t){return 0}}}(l,a,s));return r.a.createElement("table",{className:"peopleTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{onClick:this.getFieldOfSort,className:"cursorPointer"},"Id"),r.a.createElement("th",{onClick:this.getFieldOfSort,className:"cursorPointer"},"Name"),r.a.createElement("th",null,"Sex"),r.a.createElement("th",{onClick:this.getFieldOfSort,className:"cursorPointer"},"Born"),r.a.createElement("th",{onClick:this.getFieldOfSort,className:"cursorPointer"},"Died"),r.a.createElement("th",{onClick:this.getFieldOfSort,className:"cursorPointer"},"Age"),r.a.createElement("th",null,"Mother"),r.a.createElement("th",null,"Father"),r.a.createElement("th",null,"Century"),r.a.createElement("th",null,"Children"))),r.a.createElement("tbody",null,i.map(function(t){return r.a.createElement(O,{person:t,onClickRow:e.handleClickRow,selectPerson:n,key:"key".concat(t.id+10)})})))}}]),t}(r.a.Component)),S=n(13),y=(n(23),[]),j=[],N=[],k="",F=(new Date).getFullYear(),x=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={name:"",sex:"",born:"",died:"",mother:"",father:"",showNewPersonForm:!1},n.handleChange=function(e){var t=e.target,a=t.value,r=t.name,o=n.state,l=o.born,c=o.died;("died"===r||"born"===r)&&a>F||("died"===r&&""!==l&&(k=a-l>150||a-l<0?"Age must be less than 150 and more than 0":""),"born"===r&&""!==c&&(k=c-a>150||c-a<0?"Age must be less than 150 and more than 0":""),n.setState(Object(s.a)({},r,a)))},n.handleSubmit=function(e){e.preventDefault();var t=n.props,a=t.people,r=t.onSubmitForm,o=n.state,l=o.born,s=o.died,c=(o.showNewPersonForm,Object(S.a)(o,["born","died","showNewPersonForm"]));if(s-l>150||s-l<0)k="Age must be less than 150 and more than 0";else{var i=Object(f.a)({},c,{born:+l,died:+s,id:a.length,age:s-l,century:Math.ceil(s/100),children:[]});n.setState({name:"",sex:"",born:"",died:"",mother:"",father:""}),r(i)}},n.formClose=function(){n.setState({showNewPersonForm:!1})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.name,a=t.sex,o=t.born,l=t.died,s=t.mother,c=t.father,i=t.showNewPersonForm;return y=this.props.people.filter(function(e){return+e.born+13<=+o&&+e.died>+o}),j=y.filter(function(e){return"f"===e.sex}).map(function(e,t){return r.a.createElement("option",{key:"f".concat(t+10)},e.name)}),N=y.filter(function(e){return"m"===e.sex}).map(function(e,t){return r.a.createElement("option",{key:"m".concat(t+10)},e.name)}),r.a.createElement("div",null,i?r.a.createElement("form",{name:"newPerson",className:"new-person-form",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"text",name:"name",value:n,placeholder:"Name",className:"new-person-form__name",onChange:this.handleChange,required:!0}),r.a.createElement("div",{className:"new-person-form__sex"},r.a.createElement("label",{htmlFor:"newPerson-male"},r.a.createElement("input",{id:"newPerson-male",type:"radio",name:"sex",value:"m",checked:"m"===a,onChange:this.handleChange,required:!0}),"male"),r.a.createElement("label",{htmlFor:"newPerson-female"},r.a.createElement("input",{id:"newPerson-female",type:"radio",name:"sex",value:"f",checked:"f"===a,onChange:this.handleChange}),"female")),r.a.createElement("label",{htmlFor:"newPerson-born"},"Born:",r.a.createElement("input",{id:"newPerson-born",type:"number",min:"1500",name:"born",value:o,placeholder:"Year of born",className:"new-person-form__life-dates",onChange:this.handleChange,required:!0})),r.a.createElement("label",{htmlFor:"newPerson-died"},"Died:",r.a.createElement("input",{id:"newPerson-died",type:"number",min:"1500",name:"died",value:l,placeholder:"Year of died",className:"new-person-form__life-dates",onChange:this.handleChange,required:!0})),r.a.createElement("span",{className:"error-message"},k),r.a.createElement("label",{htmlFor:"newPerson-mother",className:"new-person-form__parents"},r.a.createElement("span",null,"Mother:"),r.a.createElement("select",{id:"newPerson-mother",name:"mother",value:s,onChange:this.handleChange},r.a.createElement("option",null," "),j)),r.a.createElement("label",{htmlFor:"newPerson-father",className:"new-person-form__parents"},r.a.createElement("span",null,"Father:"),r.a.createElement("select",{id:"newPerson-father",name:"father",value:c,onChange:this.handleChange},r.a.createElement("option",null," "),N)),r.a.createElement("button",{type:"submit",className:"new-person-form__button"},"Add new person"),r.a.createElement("button",{type:"button",onClick:this.formClose,className:"new-person-form__button"},"Close")):r.a.createElement("button",{type:"button",className:"app__add-new-person",onClick:function(){return e.setState({showNewPersonForm:!0})}},"Add new person"))}}]),t}(r.a.Component);x.defaultProps={people:[]};var _=x,A=(n(24),function(e,t){return!!e&&(t.split(" ").length>1?e.toLowerCase().startsWith(t.toLowerCase()):e.toLowerCase().split(" ").some(function(e){return e.startsWith(t.toLowerCase())}))}),D=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={listOfPeople:[],filtredPeople:[],filterInput:"",sortStatus:1},n.filterByNameAndParents=function(e){var t=e.target,a=t.value,r=t.name,o=Object(c.a)(n.state.listOfPeople);n.setState(Object(s.a)({},r,a)),""!==a?n.setState({filtredPeople:o.filter(function(e){var t=A(e.name,a),n=A(e.mother,a),r=A(e.father,a);return t||n||r})}):n.setState({filtredPeople:Object(c.a)(o)})},n.updateSortStatus=function(){n.setState(function(e){return{sortStatus:-e.sortStatus}})},n.handleSubmitForm=function(e){n.setState(function(t){return{listOfPeople:[].concat(Object(c.a)(t.listOfPeople),[e]),filtredPeople:[].concat(Object(c.a)(t.listOfPeople),[e]),filterInput:""}})},n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;P().then(function(t){e.setState({listOfPeople:Object(c.a)(t),filtredPeople:Object(c.a)(t)})})}},{key:"render",value:function(){var e=this.state,t=e.filtredPeople,n=e.sortStatus,a=e.listOfPeople,o=e.filterInput;return r.a.createElement("div",{className:"app"},r.a.createElement("h1",null,"People table",t.length),r.a.createElement("input",{type:"text",className:"app__filter",placeholder:"Enter the name for search",name:"filterInput",value:o,onChange:this.filterByNameAndParents}),r.a.createElement(_,{people:a,onSubmitForm:this.handleSubmitForm}),r.a.createElement(C,{people:t,sortStatus:n,onSort:this.updateSortStatus}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(D,{test:123}),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d496dccc.chunk.js.map